# BookReview - Full-Stack Book Review Platform

A comprehensive book review platform built with Next.js 15 and React 19. This is a learning project designed to help practice full-stack development, featuring authentication, CRUD operations, social features, and admin capabilities.

## Project Overview

**Type**: Full-stack web application (frontend)
**Framework**: Next.js 15.5.4 with App Router
**Language**: TypeScript
**Styling**: Tailwind CSS 4
**State Management**: React Hooks (useState, useEffect)
**API Client**: Axios with interceptors

## Architecture

### Tech Stack
- **Frontend**: Next.js 15, React 19, TypeScript 5
- **Styling**: Tailwind CSS 4 with PostCSS
- **UI Components**: Custom components with Lucide React icons
- **API Integration**: Axios with JWT authentication
- **Development**: Turbopack for fast builds

### Project Structure
```
books-review-fe/
├── app/                      # Next.js App Router
│   ├── page.tsx             # Home page with trending/top-rated books
│   ├── layout.tsx           # Root layout with navbar
│   ├── globals.css          # Global Tailwind styles
│   ├── login/page.tsx       # Login page
│   ├── signup/page.tsx      # Signup page
│   ├── books/               # Books section
│   │   ├── page.tsx         # Browse all books (search, filter, sort)
│   │   ├── new/page.tsx     # Add new book form
│   │   └── [id]/page.tsx    # Book details & reviews
│   ├── profile/[id]/page.tsx # User profile with reviews
│   └── admin/page.tsx       # Admin dashboard
├── components/              # Reusable React components
│   ├── Navbar.tsx          # Navigation with auth state
│   ├── BookCard.tsx        # Book display card
│   └── ReviewCard.tsx      # Review display card
├── lib/                     # Utilities
│   ├── api.ts              # Axios API client & endpoints
│   ├── mockData.ts         # Mock data for development
│   └── utils.ts            # Helper functions (cn utility)
└── public/                  # Static assets
```

## Features Implemented

### Authentication System
- **Sign Up**: User registration with name, email, password
- **Login**: Email/password authentication with JWT
- **Logout**: Clear token and redirect
- **Protected Routes**: Auth-required pages (add book, admin)
- **Token Storage**: localStorage with automatic injection via Axios interceptors

### Book Management
- **Browse Books** (`/books`): Search, filter by genre, sort by title/rating/reviews/newest
- **Book Details** (`/books/[id]`): View book info, cover, description, stats, all reviews
- **Add Book** (`/books/new`): Upload cover image, add title, author, ISBN, genre, description, year
- **Update/Delete**: Admin functionality (placeholder)

### Review System
- **Write Reviews**: 1-5 star rating, text, spoiler flag
- **View Reviews**: On book detail pages with user info
- **Like Reviews**: Helpful/like button with count
- **Spoiler Protection**: Reviews marked as spoilers are hidden by default (click to reveal)

### User Profiles
- **View Profile** (`/profile/[id]`): User info, avatar, bio, stats (review count, followers, average rating)
- **Edit Profile**: Update name, bio (own profile only)
- **User's Reviews**: List all reviews by user

### Admin Features
- **Dashboard** (`/admin`): Platform analytics (users, books, reviews, growth)
- **User Management**: View users, change roles (user/moderator/admin), ban/unban
- **Analytics**: Total stats with percentage growth indicators

### UI/UX
- Responsive design (mobile, tablet, desktop)
- Loading states with spinners
- Error handling and user feedback
- Clean, modern Tailwind design
- Sticky navigation bar
- Card-based layouts

## Development Status

### Current State
- ✅ All frontend pages implemented
- ✅ Mock data for testing without backend
- ⏳ API calls defined but commented out (ready for backend)
- ⏳ File uploads configured (multipart/form-data)
- ⏳ Awaiting backend implementation

### Mock Data
Currently using `lib/mockData.ts` with:
- 6 sample books (various genres)
- 3 sample reviews
- User profiles
- Genres list

## Backend Integration Guide

### Environment Setup
Create `.env.local`:
```env
NEXT_PUBLIC_API_URL=http://localhost:3001/api
```

### API Endpoints Expected

#### Authentication
- `POST /api/auth/signup` - Register user → returns `{ token, user }`
- `POST /api/auth/login` - Login → returns `{ token, user }`
- `POST /api/auth/logout` - Logout

#### Books
- `GET /api/books` - List books (pagination, search, filters)
- `GET /api/books/:id` - Single book details
- `POST /api/books` - Create book (multipart/form-data, auth required)
- `PUT /api/books/:id` - Update book (auth required)
- `DELETE /api/books/:id` - Delete book (admin only)
- `GET /api/books/trending` - Trending books (cache recommended)
- `GET /api/books/:id/reviews` - Reviews for book

#### Reviews
- `POST /api/books/:bookId/reviews` - Create review (auth required)
- `PUT /api/reviews/:id` - Update review (owner only)
- `DELETE /api/reviews/:id` - Delete review (owner/admin)
- `POST /api/reviews/:id/like` - Like review
- `DELETE /api/reviews/:id/like` - Unlike review

#### Users
- `GET /api/users/:id` - User profile
- `PUT /api/users/:id` - Update profile (multipart/form-data, owner only)
- `GET /api/users/:id/reviews` - User's reviews
- `POST /api/users/:id/follow` - Follow user
- `DELETE /api/users/:id/follow` - Unfollow user

#### Admin
- `GET /api/admin/users` - All users (admin only)
- `PUT /api/admin/users/:id/role` - Change role
- `PUT /api/admin/users/:id/ban` - Ban user
- `PUT /api/admin/users/:id/unban` - Unban user
- `GET /api/admin/analytics` - Platform stats

### Response Formats

**Book Object:**
```json
{
  "id": "string",
  "title": "string",
  "author": "string",
  "isbn": "string",
  "genre": "string",
  "description": "string",
  "coverImage": "url",
  "averageRating": 4.5,
  "reviewCount": 234,
  "publicationYear": 1925,
  "createdAt": "2024-01-15T00:00:00Z"
}
```

**Review Object:**
```json
{
  "id": "string",
  "bookId": "string",
  "userId": "string",
  "userName": "string",
  "userAvatar": "url",
  "rating": 5,
  "text": "string",
  "spoiler": false,
  "likes": 45,
  "isLiked": false,
  "createdAt": "2024-02-01T00:00:00Z"
}
```

**User Object:**
```json
{
  "id": "string",
  "name": "string",
  "email": "string",
  "role": "user|moderator|admin",
  "avatar": "url",
  "bio": "string",
  "reviewCount": 12,
  "followersCount": 45,
  "followingCount": 32,
  "averageRating": 4.3,
  "joinDate": "2024-01-01T00:00:00Z"
}
```

## Development Commands

```bash
# Install dependencies
npm install

# Run development server (with Turbopack)
npm run dev

# Build for production
npm run build

# Start production server
npm start

# Run linter
npm run lint
```

## Key Files Reference

### API Configuration (`lib/api.ts`)
- Axios instance with base URL
- Request interceptor for JWT token injection
- All API endpoint definitions organized by resource
- Ready to uncomment when backend is available

### Mock Data (`lib/mockData.ts`)
- Sample books, reviews, users
- Used throughout the app for development
- Remove/comment when switching to real API

### Navbar (`components/Navbar.tsx`)
- Checks localStorage for auth state
- Conditional rendering based on user role
- Logout handler
- Sticky positioning

### Pages
- All pages are client components (`'use client'`)
- Use React hooks for state management
- Have commented-out API calls ready to enable
- Include loading states and error handling

## Database Schema Needed

The backend should implement these tables:
1. **users**: id, name, email, password (hashed), avatar, bio, role, created_at
2. **books**: id, title, author, isbn, genre, description, cover_image, publication_year, created_at
3. **reviews**: id, book_id, user_id, rating, text, spoiler, created_at, updated_at
4. **review_likes**: id, review_id, user_id, created_at
5. **follows**: id, follower_id, following_id, created_at
6. **comments** (optional): id, review_id, user_id, parent_id, text, created_at

See `BACKEND_GUIDE.md` for detailed schema and implementation instructions.

## Security Considerations

- JWT tokens stored in localStorage (consider httpOnly cookies for production)
- Password hashing required on backend (bcrypt recommended)
- Input validation needed on backend
- CORS configuration required
- File upload validation (size, type)
- Admin role should only be set via database (not through API)

## Deployment

### Vercel (Recommended)
1. Push to GitHub
2. Import project in Vercel
3. Add environment variable: `NEXT_PUBLIC_API_URL`
4. Deploy

### Backend Deployment Options
- Railway (free tier)
- Render (free tier)
- Heroku
- AWS/DigitalOcean

## Learning Concepts

This project teaches:
- **Frontend**: Next.js App Router, React Server Components, client-side state, routing
- **Backend**: RESTful APIs, authentication (JWT), CRUD operations, file uploads
- **Database**: Schema design, relationships, indexes, queries
- **Full-stack**: API integration, CORS, environment variables, deployment

## Current Focus

The frontend is complete and ready for backend integration. The main task is:
1. Implement backend API (see `BACKEND_GUIDE.md`)
2. Set up database with proper schema
3. Configure CORS and environment variables
4. Uncomment API calls in frontend
5. Test integration
6. Deploy both frontend and backend

## Notes

- Using Next.js 15's new features (App Router, React Server Components)
- Turbopack enabled for faster development builds
- All components use TypeScript for type safety
- Tailwind CSS 4 with custom configuration
- Icons from lucide-react
- Mock data allows frontend development without backend
- Ready for production once backend is connected

## Support Resources

- Frontend code: All pages in `app/` directory
- API definitions: `lib/api.ts`
- Backend guide: `BACKEND_GUIDE.md`
- README: `README.md`

---

**Status**: Frontend complete, awaiting backend implementation
**Next Steps**: Build backend API following `BACKEND_GUIDE.md`
